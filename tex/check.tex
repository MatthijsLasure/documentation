% Getting into it: keeping taps on the simulation

There are a few tools available to keep an eye on your simulation, something 
that is strongly recommended to do.


\section{HTOP}
Most Linux distributions come with \verb|htop| preinstalled. After startup, you 
can filter on username by pressing 'u', and apply a filter by pressing 'F4'. 

When starting a LJ simulation, 8 cores will be used by Gaussian for the 
calculation of the partial charges. Afterwards, the program will run on one 
core, which should reach 100\%. Due to the OpenMP design there will be multiple 
threads visible (as set in the run script), but only one will actually do 
something.

In the case of a QM simulation, multiple cores will be used. Currently 
(27/07/2016) 2 cores will be maxed out while the other 6 hover around 5\%. This 
is normal behaviour.

If the program is running (= is present in the list of open programs) but there 
is no CPU activity it may have locked itself. Consult the logfile and the 
troubleshooting section of this manual.

On 8-core systems, a system load of 4 to 5 is observed.

\section{check.sh}
The \verb|check.sh| script is a simple wrapper for the 'tail' command: it will 
find the latest output file and display the latest line. After sleeping 1 
second it erases the line and starts over.

Start it using the command below. Terminate using CTRL-C.
\begin{lstlisting}[caption=The check utility]
./check.sh log.txt
\end{lstlisting}

\section{MatLab}
The scripts \verb|readIO.m| and \verb|importfileFast.m| are designed to read in 
the data from the output files, and generate the appropriate graphs.

Copy the scripts to the main directory of the simulation. Open \verb|readIO.m| 
in the editor, and change the loop length to the amount of steps. Save and run 
the script.

The script will plot the accepted energy versus the step in figure 2. Following 
variables are available:

\begin{tabular}{ll}
	Variable & Description \\ \hline
	dposma & Maximal travel distance per MC step; \\
	ii & Step numbers; \\
	kans & Chance of current MC step being accepted; \\
	pSuc & Total rate of accepted steps; \\
	ratio & Rate of accepted steps since last adjust; \\
	rSo & Solvent molecule that was moved in the step; \\
	rv & Random variable for the Metropolis method; \\
	TotEng & Total energy of the current step; \\
	TotEng\_old & Total energy of the last accepted step. \\
\end{tabular}

\section{ConvertDump}
The convertdump utility can convert the box- and dump-files into XYZ-files that 
can be read using Jmol.

To convert a box to a XYZ file without displaying hydrogen atoms (to save space 
and time), use the command below.

\begin{lstlisting}[caption=Convert a box to a XYZ file]
./convertDump -m 1 -b box.5.out -o box.5.xyz
\end{lstlisting}

For the full documentation, please see chapter \ref{chap:convertdump}.

\section{Analysis of the conformers}
Using the scripts \verb|post.sh| and \verb|cenergy.m| you can get an overview 
of the different conformers. For this, the utility \verb|calcDihedral| and the 
\verb|post.sh| script must be present in the main directory. Edit the 
post-script and insert the atoms for the dihedral angle. Run it, with as 
argument the logfile. This will result in a few files: acc.txt, energy.txt and 
hoeken.txt. Put these in the same directory as the cenergy-script, and run it 
in matlab.

NOTE: currently, only single bond rotations are supported.