% !TeX spellcheck = en_GB
% Getting settled: download, compile and set up
To use the simulation, following tools and programs are required:
\begin{itemize}
	\item Gaussian 09: for preparing, calculating spectra, calculating partial 
	charges with Lennard-Jones. If no LJ calculations are performed, Gaussian 
	does not need to be installed on the machine.
	\item MOPAC 2016: for the PM6 calculations in the QM section.
	\item A Fortran compiler: to compile the code. Works very good with 
	gfortran, altough the Intel compiler should work.
	\item MatLab: not required, but useful for analysis of the simulation and 
	viewing the spectra.
	\item Linux: The program should work with any Linux distribution. Windows 
	or Mac OS is not supported.
\end{itemize}

To compile the source code, you need the \verb|make| utility and a compiler. 
Following compilers have been successfully used. Other versions are likely to 
work, but are untested. To enable parallelization, the compiler must support 
OpenMP.
\begin{itemize}
	\item Intel Fortran Compiler version 16.0.3
	\item GNU Fortran Compiler versions 4.6.3 and 4.8.5
\end{itemize}

\section{External tools}
\subsection{Gaussian 09}
During development, Gaussian 09\cite{g09} versions A02 and 09D have been used, 
and are proven to work correctly.
To install Gaussian, follow the instructions. Make sure that the installation 
path is added to the \verb|$PATH|-variable. If Gaussian can be started with the 
command \verb|g09|, the installation was succesfull.

\subsection{MOPAC 2016}
MOPAC\cite{mopac} is a little tougher. After downloading, installing and 
activating, a 
symbolic link must be made. Issue following command in the installation 
directory:

\begin{lstlisting}[caption=Symlink to MOPAC]
ln -s MOPAC2016.exe mopac
\end{lstlisting}

Finally, make sure that the MOPAC directory is also included in the 
\verb|$PATH|-variable. The easiest way to achieve this, is by adding following 
to your \verb|.bashrc|-file:
\begin{lstlisting}[caption=changing the path variable]
export PATH=$PATH:/path/to/mopac

# Then execute: (or restart the terminal)
source .bashrc
\end{lstlisting}

The installation is succesfull when executing \verb|mopac| returns the welcome 
message. Don't forget to activate the program!

\section{Downloading and compiling}

\subsection{Downloading}
The source code can be obtained at the links below. The first link refers to 
the latest release version, which is tested and deemed working. The other link 
fetches the latest revision, which may contain bugs.

\url{https://github.com/MatthijsLasure/MonteCarlo/releases/latest}

\url{https://github.com/MatthijsLasure/MonteCarlo/archive/master.zip}.

If git is installed on the system, following command can also be issued to 
obtain a ready to go directory:

\begin{lstlisting}[caption=Clone with git]
git clone https://github.com/MatthijsLasure/MonteCarlo.git
\end{lstlisting}

This command will generate a MonteCarlo-directory, containing all source files.

\subsection{Compiling}
Compiling is very easy.
Inside the MonteCarlo source directory, make a directory called either 
\verb|tmp-gnu| or \verb|tmp-intel|, and issue following command:

\begin{lstlisting}[caption=Compiling the main program]
make GNU   # To use the GFortran compiler
make intel # To use the Intel compiler
\end{lstlisting}

The executable \verb|MonteCarloGNU| or \verb|MonteCarloOpenMP| will be created.
Both have the OpenMP standard enabled to allow for multi-threaded 
PM6-calculations.

All the utilities are compiled using the GNU compiler in similar fashion.
Just run \verb|make| in the source directory to obtain the binaries.

\section{Set-up}
It is strongly advised to make a directory for every simulation, as to keep 
files separated. Copy all necessary files into this directory, and make sure 
that the executable files (\verb|run.sh| and \verb|MonteCarloGNU|) have the 
correct permissions (executable). Following files are necessary:

\begin{tabular}{lll}
	File & Job & Description \\ \hline \hline
	MonteCarloGNU & General & Binary executable \\
	run.sh & General & Setup and control script \\
	config.ini & General & Configuration file \\
	box.txt & General & Input data \\
	param.txt & Lennard-Jones & Parameters for the solvent LJ calculations \\
	par\_sol.txt & Lennard-Jones & Parameters for the solute LJ calculations \\
	config0.ini & Minimalisation & Configuration file without solute rotation \\
	BoxScale & Minimalisation & Utility for rescaling the box \\
\end{tabular}

\iffalse
\begin{tabular}{l}
	General \\ \hline
	MonteCarloGNU \\
	run.sh \\
	box.txt \\
	config1.ini \\
\end{tabular}
\hspace{0.5cm}
\begin{tabular}{l}
	Lennard-Jones \\ \hline
	param.txt \\
	par\_sol.txt \\
	\null \\
	\null \\
\end{tabular}
\hspace{0.5cm}
\begin{tabular}{l}
	Minimalisation \\ \hline
	BoxScale \\
	config0.ini \\
	\null \\
	\null \\
\end{tabular}
\fi

For a breakdown of the files and their syntax, please see chapter XX.